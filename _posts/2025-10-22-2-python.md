---
layout: single
title: "[Python] 1.3 About Python Packages" 
date: 2025-10-22
categories: Python
#header:
  #overlay_image: /assets/images/docker-container-tech.svg
  #overlay_filter: 0.5
  #teaser: /assets/images/docker-container-tech.svg
  #caption: "Create Docker Image"
Typora-root-url: ../
---

# Python Packages: Organizing Modules Hierarchically

As your Python projects grow larger, organizing related modules together becomes essential. This is where packages come in handy. A package allows you to manage Python modules hierarchically, making your code more structured and maintainable.

A Python package consists of directories and Python modules organized in a specific structure.

## Understanding package structure

Let's look at an example package structure called `game`:

```bash
game/
    __init__.py
    sound/
        __init__.py
        echo.py
        wav.py
    graphic/
        __init__.py
        screen.py
        render.py
    play/
        __init__.py
        run.py
        test.py
```

This package contains the `game`, `sound`, `graphic`, and `play` directories along with `.py` Python modules.

The top-level `game` directory is called the root directory, while the lower-level `sound`, `graphic`, and `play` directories are called subdirectories.

## Creating your first package

Now let's create the `game` package ourselves. First, we'll create the necessary files and then fill them with content.

```python
# echo.py
def echo_test():
    print("echo")
```

```python
# render.py
def render_test():
    print("render")
```

## Using packages

Now let's run the Python interpreter in the command prompt environment and practice using our package.

**Method 1:**

```bash
>>> import game.sound.echo
>>> game.sound.echo.echo_test()
echo
```

**Method 2:**

```bash
>>> from game.sound import echo
>>> echo.echo_test()
echo
```

**Method 3:**

```bash
>>> from game.sound.echo import echo_test
>>> echo_test()
echo
```

## The purpose of `__init__.py`

The `__init__.py` file indicates that a directory is part of a package.

If there's no `__init__.py` file in directories like `game`, `sound`, or `graphics`, they won't be recognized as packages.

Starting with Python 3.3, directories are recognized as packages even without `__init__.py` files, but creating `__init__.py` files is still the safer approach.

Additionally, `__init__.py` files can contain settings and initialization code related to the package.

### Defining package variables and functions

You can define variables and functions at the package level.

```python
# game/__init__.py
VERSION = 3.5

def print_version_info():
    print(f"The version of this game is {VERSION}.")
```

Let's verify this:

```bash
>>> import game
>>> print(game.VERSION)
3.5
>>> game.print_version_info()
The version of this game is 3.5.
```

## Pre-importing modules within packages

You can pre-import other modules within a package in the `__init__.py` file, allowing code that uses the package to access them more conveniently.

```python
# game/__init__.py
from .graphic.render import render_test

VERSION = 3.5

def print_version_info():
    print(f"The version of this game is {VERSION}.")
```

Now you can conveniently use the `render_test` function through the `game` package:

```bash
>>> import game
>>> game.render_test()
render
```

## Package initialization

You can write code in the `__init__.py` file that should be executed when the package is first loaded.

For example, you can perform tasks like connecting to a database or loading configuration files.

```python
# game/__init__.py
from .graphic.render import render_test

VERSION = 3.5

def print_version_info():
    print(f"The version of this game is {VERSION}.")

# Write package initialization code here
print("Initializing game ...")
```

This way, the initialization code runs when you first import the package:

```bash
>>> import game
Initializing game ...
>>>
```

The initialization code runs only once.

## The `__all__` variable

Try the following:

```bash
>>> from game.sound import *
Initializing game ...
>>> echo.echo_test()
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
NameError: name 'echo' is not defined
```

When importing modules from a specific directory using `*`, you must set the `__all__` variable in that directory's `__init__.py` file to define which modules can be imported.

```python
# game/sound/__init__.py
__all__ = ['echo']
```

After modifying the `__init__.py` file as shown above and running the code again, you'll see the desired result:

```bash
>>> from game.sound import *
Initializing game ...
>>> echo.echo_test()
echo
```

## Relative path imports

What if you want to use the `echo.py` module from the `sound` directory in the `render.py` module in the `graphic` directory?

Let's modify `render.py` as follows:

```python
# render.py
from game.sound.echo import echo_test

def render_test():
    print("render")
    echo_test()
```

After modifying, run it like this:

```bash
>>> from game.graphic.render import render_test
Initializing game ...
>>> render_test()
render
echo
```

It works perfectly.

As in the example above, you can import using the full path with `from game.sound.echo import echo_test`, but you can also import using a relative path:

```python
# render.py
from ..sound.echo import echo_test

def render_test():
    print("render")
    echo_test()
```

## Summary

Python packages provide a powerful way to organize related modules:
- Packages are directories containing `__init__.py` files and Python modules
- Use dot notation to access modules within packages
- The `__init__.py` file marks directories as packages and can contain initialization code
- Package-level variables and functions can be defined in `__init__.py`
- The `__all__` variable controls what gets imported with `from package import *`
- Relative imports using `..` notation allow modules within a package to reference each other

Packages help you build larger, well-organized Python applications by grouping related functionality together in a hierarchical structure.

## Sources

- Jump to Python: https://wikidocs.net/28